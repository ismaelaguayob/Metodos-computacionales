!function(){"use strict";var a=null;a=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(a,b){function g(a,b,c,d){return e={label:c,sources:b},"function"==typeof d?d(a,b,c):a.src(b.map(function(a){return{src:a.src,type:a.type,res:a.res}}))}var d,c={},e={},f={},h=b.getComponent("MenuItem"),i=b.extend(h,{constructor:function(a,b,c,d){this.onClickListener=c,this.label=d,h.call(this,a,b),this.src=b.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),b.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(a){this.onClickListener(this);var b=this.player_.currentTime(),c=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),c||this.player_.bigPlayButton.hide(),"function"!=typeof a&&"function"==typeof this.options_.customSourcePicker&&(a=this.options_.customSourcePicker);var d="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(d="timeupdate"),g(this.player_,this.src,this.options_.label,a).one(d,function(){this.player_.currentTime(b),this.player_.handleTechSeeked_(),c||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),j=b.getComponent("MenuButton"),k=b.extend(j,{constructor:function(a,c,d,e){if(this.sources=c.sources,this.label=e,this.label.innerHTML=c.initialySelectedLabel,j.call(this,a,c,d),this.controlText("Quality"),d.dynamicLabel)this.el().appendChild(e);else{var f=document.createElement("span");b.addClass(f,"vjs-resolution-button-staticlabel"),this.el().appendChild(f)}},createItems:function(){var a=[],b=this.sources&&this.sources.label||{},c=function(b){a.map(function(a){a.selected(a===b),a.removeClass("vjs-selected")})};for(var d in b)b.hasOwnProperty(d)&&(a.push(new i(this.player_,{label:d,src:b[d],initialySelected:d===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},c,this.label)),f[d]=a[a.length-1]);return a}});d=function(a){function l(a,b){return a.res&&b.res?+b.res-+a.res:0}function m(a){var b={label:{},res:{},type:{}};return a.map(function(a){n(b,"label",a),n(b,"res",a),n(b,"type",a),o(b,"label",a),o(b,"res",a),o(b,"type",a)}),b}function n(a,b,c){null==a[b][c[b]]&&(a[b][c[b]]=[])}function o(a,b,c){a[b][c[b]].push(c)}function p(a,b){var c=d.default,e="";return"high"===c?(c=b[0].res,e=b[0].label):"low"!==c&&null!=c&&a.res[c]?a.res[c]&&(e=a.res[c][0].label):(c=b[b.length-1].res,e=b[b.length-1].label),{res:c,label:e,sources:a.res[c]}}function q(a){a.tech_.ytPlayer.setPlaybackQuality("default"),a.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){a.trigger("resolutionchange")}),a.one("play",function(){var b=a.tech_.ytPlayer.getAvailableQualityLevels(),c={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"default"}},e=[];b.map(function(b){e.push({src:a.src().src,type:a.src().type,label:c[b].label,res:c[b].res,_yt:c[b].yt})}),j=m(e);var f=function(b,c,d){return a.tech_.ytPlayer.setPlaybackQuality(c[0]._yt),a},g={label:"auto",res:0,sources:j.label.auto},h=new k(a,{sources:j,initialySelectedLabel:g.label,initialySelectedRes:g.res,customSourcePicker:f},d,i);h.el().classList.add("vjs-resolution-button"),a.controlBar.resolutionSwitcher=a.controlBar.addChild(h)})}var d=b.mergeOptions(c,a),h=this,i=document.createElement("span"),j={};b.addClass(i,"vjs-resolution-button-label"),h.updateSrc=function(a){if(!a)return h.src();h.controlBar.resolutionSwitcher&&(h.controlBar.resolutionSwitcher.dispose(),delete h.controlBar.resolutionSwitcher),a=a.sort(l),j=m(a);var c=p(j,a),e=new k(h,{sources:j,initialySelectedLabel:c.label,initialySelectedRes:c.res,customSourcePicker:d.customSourcePicker},d,i);return b.addClass(e.el(),"vjs-resolution-button"),h.controlBar.resolutionSwitcher=h.controlBar.el_.insertBefore(e.el_,h.controlBar.getChild("fullscreenToggle").el_),h.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},g(h,c.sources,c.label)},h.currentResolution=function(a,b){return null==a?e:(null!=f[a]&&f[a].onClick(b),h)},h.getGroupedSrc=function(){return j},h.ready(function(){h.options_.sources.length>1&&h.updateSrc(h.options_.sources),"Youtube"===h.techName_&&q(h)})},b.plugin("videoJsResolutionSwitcher",d)}(window,a)}();